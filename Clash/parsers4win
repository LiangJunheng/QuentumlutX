parsers: # array
  - reg: url
    yaml:
      prepend-proxy-groups:  #添加自定义组
        - name: PROXY
          type: select
          url: http://www.gstatic.com/generate_204
          proxies:
            - 香港节点
            - 台湾节点
            - 新加坡节点
            - 美国节点
            - 日本节点
            - 韩国节点
 
        - name: 香港节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true

        - name: 台湾节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true

        - name: 新加坡节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true

        - name: 美国节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true
   
        - name: 日本节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true

        - name: 韩国节点
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          tolerance: 350
          lazy: true

      commands:
        # 向策略组添加节点
        - proxy-groups.香港节点.proxies=[]proxyNames|^(?=(.*(港|HK|虚通|HongKong)))\1((?!(普通)).)*$ # 过滤出香港节点，并排查“普通”关键词的节点
        - proxy-groups.台湾节点.proxies=[]proxyNames|^(?=(.*(台|TW|TaiWan)))\1((?!(普通)).)*$ # 过滤出台湾节点，并排查“普通”关键词的节点
        - proxy-groups.新加坡节点.proxies=[]proxyNames|^(?=(.*(新加坡|狮城|SG|Singapore)))\1((?!(普通)).)*$ # 过滤出新加坡节点，并排查“普通”关键词的节点
        - proxy-groups.美国节点.proxies=[]proxyNames|^(?=(.*(美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|UnitedStates)))\1((?!(普通)).)*$ # 过滤出美国节点，并排查“普通”关键词的节点
        - proxy-groups.日本节点.proxies=[]proxyNames|^(?=(.*(日|东京|大阪|泉日|琦玉|Japan|JP)))\1((?!(普通)).)*$ # 过滤出日本节点，并排查“普通”关键词的节点
        - proxy-groups.韩国节点.proxies=[]proxyNames|^(?=(.*(韩|韓|首尔|KR|Korea)))\1((?!(普通)).)*$ # 过滤出日本节点，并排查“普通”关键词的节点
      mix-rule-providers:
        LAN:
          type: http
          behavior: ipcidr
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
          path: ./ruleset/lancidr.yaml
          interval: 86400

        apple:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
          path: ./ruleset/apple.yaml
          interval: 86400

        google:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
          path: ./ruleset/google.yaml
          interval: 86400

        proxy:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
          path: ./ruleset/proxy.yaml
          interval: 86400

        applications:
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
          path: ./ruleset/applications.yaml
          interval: 86400

        ProxyLite:
          behavior: classical 
          type: http
          url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ProxyLite.yaml"
          interval: 86400
          path: ./ruleset/ProxyLite.yaml

        ProxyMedia:
          behavior: classical 
          type: http
          url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ProxyMedia.yaml"
          interval: 86400
          path: ./ruleset/ProxyMedia.yaml

        ChinaDomain:
          behavior: classical 
          type: http
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml"
          interval: 86400
          path: ./ruleset/ChinaDomain.yaml

        cncidr:
          type: http
          behavior: classical
          url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaIPs/ChinaIPs_Classical.yaml"
          path: ./ruleset/cncidr.yaml
          interval: 86400

      prepend-rules:
        - RULE-SET,LAN,DIRECT
        - RULE-SET,apple,PROXY
        - PROCESS-NAME,iCloud,PROXY
        - DOMAIN-SUFFIX,bing.com,PROXY
        - RULE-SET,applications,PROXY
        - RULE-SET,google,PROXY
        - RULE-SET,ProxyMedia,PROXY
        - RULE-SET,ProxyLite,PROXY
        - RULE-SET,proxy,PROXY
        - GEOIP,CN,DIRECT
        - RULE-SET,ChinaDomain,DIRECT
        - RULE-SET,cncidr,DIRECT
        - MATCH,PROXY
